version: '3.8'
services:
  healthchecks:
    image: healthchecks/healthchecks:latest
    restart: unless-stopped
    environment:
      - DB=sqlite
      - DB_NAME=/data/hc.sqlite
      - DEBUG=False
      - SECRET_KEY=your-super-secret-key-change-me-1234567890abcdefghijklmnopqrstuvwxyz
      - SITE_ROOT=https://esso0s4skwcg8cksk4w04o44.91.99.135.192.sslip.io
      - ALLOWED_HOSTS=*
      # ... your SMTP settings
    volumes:
      - hc_data:/data
    # ❌ REMOVE these completely:
    # container_name: healthchecks  
    # ports:
    #   - "8080:8000"
    
    # ✅ ADD these Traefik labels:
    labels:
      - traefik.enable=true
      - traefik.http.routers.healthchecks.rule=Host(`esso0s4skwcg8cksk4w04o44.91.99.135.192.sslip.io`)
      - traefik.http.routers.healthchecks.entrypoints=websecure
      - traefik.http.routers.healthchecks.tls.certresolver=letsencrypt
      - traefik.http.services.healthchecks.loadbalancer.server.port=8000

volumes:
  hc_data:
